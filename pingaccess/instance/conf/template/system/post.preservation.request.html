<!DOCTYPE html>
<html>
<head>
  <title>$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "redirect.response.template.title"))</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="$Encode.forHtmlAttribute($reservedApplicationContextRoot)/favicon.ico"/>
  <script type="text/javascript">
    function storeAndNavigate() {

      // using var here for backward-compatibility
      var encodedNonce = '$Encode.forJavaScript($nonce)';
      var encodedPostParams = '$Encode.forJavaScript($postParams)';

      var encodedWebStorage = $Encode.forJavaScript($webStorage);
      encodedWebStorage.setItem(encodedNonce, encodedPostParams);

      #if($enableFragmentPreservation)
      if (window.location.hash) {
        encodedWebStorage.setItem('fp-' + encodedNonce, window.location.hash);
      }
      #end
      window.location = '$Encode.forJavaScript($location)';
    }
  </script>
</head>
<body onLoad="storeAndNavigate()">
  <noscript>
    <p>
      <strong>$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "redirect.response.template.noteLabel")): </strong>$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "post.preservation.javascript.required"))
    </p>
    </noscript>
  </body>
</html>
