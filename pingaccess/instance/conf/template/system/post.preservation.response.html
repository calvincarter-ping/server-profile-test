<!DOCTYPE html>
<html>
<head>
  <title>$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "redirect.response.template.title"))</title>
  <meta charset="UTF-8">
  <link rel="shortcut icon" href="$Encode.forHtmlAttribute($reservedApplicationContextRoot)/favicon.ico"/>
  <script type="text/javascript">
  function resubmitForm() {

    #if($enableFragmentPreservation)

      // using var here for backward-compatibility
      var encodedNonce = '$Encode.forJavaScript($nonce)';
      var encodedWebStorage = $Encode.forJavaScript($webStorage);
      var hash = encodedWebStorage.getItem('fp-' + encodedNonce);

      if(hash) {
        encodedWebStorage.removeItem('fp-' + encodedNonce);
        document.getElementById('redirectForm').action = '$Encode.forJavaScript($location)' + hash;
      }
    #end
    document.createElement('form').submit.call(document.getElementById('redirectForm'))
  }
  </script>
</head>
<body onLoad="resubmitForm()">
  <noscript>
    <p>
      <strong>$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "redirect.response.template.noteLabel")): </strong>$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "post.preservation.javascript.required"))
    </p>
    <a href="$Encode.forHtmlAttribute(${location})">$Encode.forHtml($localizedMessageResolver.resolveMessage($locale, "redirect.response.template.provider"))</a>
  </noscript>
  <form id="redirectForm" method="post" action="$Encode.forHtmlAttribute($location)">
    #foreach ($entry in $postParams.entrySet())
      #foreach ($value in $entry.getValue())
        <input type="hidden" name="$Encode.forHtmlAttribute($entry.getKey())" value="$Encode.forHtmlAttribute($value)"/>
      #end
    #end
  </form>
</body>
</html>
